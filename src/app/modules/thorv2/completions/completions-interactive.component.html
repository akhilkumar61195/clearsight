<ngx-spinner bdColor = "rgba(0,0,0,0.2)" size = "default" color = "#fff" type = "line-spin-fade" [fullScreen] = "true"><p style="color: white" > Hang tight, we're loading things for you... </p></ngx-spinner>
<div class="blue-background">
  <div class="col-12 sm:col-12 md:col-6 lg:col-3 p-6px">
    <span class="p-input-icon-left inputsearchSpan">
      <i class="pi pi-search"></i>
      <input pInputText type="text" #searchSchematic class="whiteblue" placeholder="Search"
        (input)="onSearch($event)" />
    </span>
  </div>
  <div class="col-6 lg:col-6" *ngIf="isWellSelected">
    <p-button type="text" styleClass="chv-light-blue-btn" label=" Component" icon="pi pi-plus-circle"
      class="marginClass" [ngClass]="{'disabled': !isAddComponentShowing}" [disabled]="!isAddComponentShowing"
      (click)="openAddComponentDialog()"></p-button>
    <p-button type="text" styleClass="chv-light-blue-btn" label="Go To Schemantic" class="marginClass ml-2"
      (click)="goToSchematic()"></p-button>
  </div>

  <div class="d-flex export-container align-end" *ngIf="isWellSelected">
    <!-- changed the button text -->
     <!-- added hide deleted  -->
    <div class="flex flex-wrap gap-1 justify-content lightBlueBG displaytoggler p-1 p-component">
      <p-checkbox label="Hide Deleted" name="hideDeleted" binary="true" [(ngModel)]="hideDeleted"
        (onChange)="applyFilter()"></p-checkbox>
    </div>

    <!-- <p-button  styleClass="chv-light-blue-btn"  class="pr-2 pl-2" label="Download" icon="pi pi-cloud-download" (click)="download()"></p-button> -->
    <p-button styleClass="chv-light-blue-btn" class="pr-2 pl-2" label="Well Documents" icon="pi pi-cloud-upload"
      (click)="openUploadDialogBox('COMPLETION_WELL')"></p-button>
    <p-button styleClass="chv-light-blue-btn" label="Change log" class="pr-2" (click)="changeLog()"></p-button>
    <p-button class="p-button-outlined p-button-secondary saveUI ml-2 pull-right save-user-btn"
          icon="pi"  
          pTooltip="Save Personalization"
          tooltipPosition="top"
          (onClick)="onSaveState()">
    </p-button>
    <p-button icon="pi" class="p-button-outlined p-button-secondary reset-ui-button"
      pTooltip="Reset Personalization" tooltipPosition="top" (onClick)="onResetState()">
    </p-button>
  </div>
</div>
<div *ngIf="isWellSelected">
  <ag-grid-angular [ngStyle]="{ height: height$ | async }" class="ag-theme-alpine" [columnDefs]="masterDataColumnDefs"
    [rowData]="thorWellsData" (cellValueChanged)="onCellValueChanged($event)" [rowHeight]="rowHeight"
    [defaultColDef]="{ flex: 1, minWidth: 100, suppressHeaderMenuButton: true }" [singleClickEdit]="true"
    [rowDragManaged]="true" [masterDetail]="true" [detailRowAutoHeight]="true"
    [detailCellRendererParams]="detailCellRendererParams" [animateRows]="true" (gridReady)="onGridReady($event)"
    [quickFilterText]="quickFilterText" (rowClicked)="onRowClicked($event)" [getRowClass]="getRowClass"
    [sideBar]="sideBar">
  </ag-grid-angular>
  <div class="pagination-block">
    <div>
      <span class="labeltxt">Total Records:</span> {{totalRecords ? totalRecords : 0}}
    </div>
    <div>
      <p-button label="Cancel" (click)="resetThorGrid()" [disabled]="!(addedData?.length || editedRowsData?.length)"
        [outlined]="true"></p-button>
      <p-button label="Save" (click)="onClickSave()" [disabled]="!(addedData?.length || editedRowsData?.length)"
        class="ml-2"></p-button>
    </div>
  </div>

</div>
<div class="noRowstoShow" *ngIf="noRowsFound">No Rows To Show</div>

<change-log *ngIf="openChangeLog" [entityName]="entityName" [entityId]="currentEntityId"
  (onClose)="openChangeLog = false"></change-log>

<app-select-well-thor [(display)]="display" [isFilterBTNDisabled]="isFilterBTNDisabled" [(functionId)]="functionId"
  [viewOptions]="viewOptions" [projects]="projects" [selectedWellId]="selectedWellId"
  [selectedWellNumber]="selectedWellNumber" (updateFilter)="updateFilter()" (searchWellFilter)="searchWellFilter()"
  (toggleProjectWells)="toggleProjectWells($event)" (onViewSelectionChange)="onViewSelectionChange($event)">
</app-select-well-thor>

<div class="thor-completions-qty">
  <p-dialog [(visible)]="displayCompletionsPQty" [modal]="true" [style]="{ width: '400px' ,height:'200px' }"
    [closable]="false">
    <div class="dialog-header">
      <h3 class="dialog-heading">Error</h3>
      <button class="dialog-header-close-btn" pButton icon="pi pi-times" (click)="onClosePQty()"></button>
    </div>
    <div><i class="pi pi-info-circle iconSize"></i></div>
    <div class="pl-2 pt-3 parentDiv"><span class="displaymessage"> At least one of Primary Demand, Secondary Demand, or
        Contingent Demand must be greater than 0.</span></div>
    <ng-template pTemplate="footer">
      <button type="button" pButton class="p-button-outlined mb-1" label="Close" (click)="onClosePQty()"></button>
    </ng-template>
  </p-dialog>
</div>
<app-mdl-add-component *ngIf="showMdlDialog" [moduleName]="'thorAddComponent'" (addSelected)="onAddSelected($event)"
  [assemblyData]="selectedThorCompletionsMaterials" (onClose)="showMdlDialog = false"></app-mdl-add-component>


<app-file-upload-with-grid [selectedView]="selectedView" [isUpdateEditable]="isUpdateEditable" [appId]="appId"
  [functionId]="functionId" [dialogTitle]="selectedDocument" [entityId]="entityId"
  [wellDocumentTypes]="wellDocumentTypes" [entityType]="entityType"
  [(displayfileUploadInteractiveDialog)]="displayfileUploadInteractiveDialog" (uploadedFileType)="uploadedFileType($event)"
  (onClose)="onClose()"></app-file-upload-with-grid>
<!-- <app-validation-thor-dialog [(displayValidationDialog)]="displayValidationDialog" [dialogTitle]="'Error'"
  (onClose)="displayValidationDialog = false"></app-validation-thor-dialog> -->