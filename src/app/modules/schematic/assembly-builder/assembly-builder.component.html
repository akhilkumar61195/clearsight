<ngx-spinner bdColor = "rgba(0,0,0,0.2)" size = "default" color = "#fff" type = "line-spin-fade" [fullScreen] = "true"><p style="color: white" > Hang tight, we're loading things for you... </p></ngx-spinner>
<div class="blue-background">
  <div class="left-container">
    <p-dropdown styleClass="lightBlueBG py-0 ddlSize" [options]="sections" [(ngModel)]="selectedSection"
      optionLabel="sectionName" optionValue="sectionId" placeholder="Select Section" (onChange)="onSectionChange()">
    </p-dropdown>

    <span *ngIf="isLowerSection || isIntermediateSection" class="ml-2">
      <label *ngIf="zoneCount > 1" class="zonelable">Zone Count:</label>
      <input *ngIf="zoneCount > 1" id="zonecount" readonly type="number" class="zoneCount" [(ngModel)]="zoneCount"
        [min]="1" style="width: 50px" />
      <label class="zonelable" *ngIf="(isLowerSection && zoneCount > 1) || isIntermediateSection">
        Zone:</label>
      <!--<p-dropdown [options]="[{ label: 'Zone 1', value: 1 },{ label: 'Zone 2 -> N', value: 2}]" styleClass="lightBlueBG zone py-0 ddlSize small-dropdown"
            [(ngModel)]="selectedZone" (onChange)="onZoneChange()"></p-dropdown>-->

      <div class="select-button-container" *ngIf="isLowerSection && CopyZone && zoneCount > 1">
        <p-selectButton (onChange)="onZoneChange()" [(ngModel)]="selectedZone" [options]="[
            { label: 'Zone 1', value: 1 },
            { label: 'Zone 2 -> ' + zoneCount, value: 2 }
          ]" optionLabel="label" optionValue="value" [allowEmpty]="false" />
      </div>
      <!-- added styleClass to make dropdown to theme color -->
      <div class="select-button-container1 wd-auto" *ngIf="isLowerSection && !CopyZone">
        <p-dropdown styleClass="lightBlueBG py-0 ddlSize" (onChange)="onZoneChange()" [(ngModel)]="selectedZone"
          [options]="zoneOptions" optionLabel="label" optionValue="value" [allowEmpty]="false" />
      </div>
      <div class="select-button-container2" *ngIf="isIntermediateSection && CopyZone && zoneCount > 1">
        <p-selectButton (onChange)="onZoneChange()" [(ngModel)]="selectedZone" [options]="[
            { label: 'No Zone', value: 0 },
            { label: 'Zone 2 -> ' + zoneCount, value: 2 },
            { label: 'Zone 1', value: 1 }
          ]" optionLabel="label" optionValue="value" [allowEmpty]="false" />
      </div>
      <div class="select-button-container4" *ngIf="isIntermediateSection && CopyZone && zoneCount == 1">
        <p-selectButton (onChange)="onZoneChange()" [(ngModel)]="selectedZone" [options]="[
            { label: 'No Zone', value: 0 },
            { label: 'Zone 1', value: 1 }
          ]" optionLabel="label" optionValue="value" [allowEmpty]="false" />
      </div>
      <!-- added styleClass to make dropdown to theme color -->
      <div class="select-button-container3 wd-auto" *ngIf="isIntermediateSection && !CopyZone">
        <p-dropdown styleClass="lightBlueBG py-0 ddlSize" (onChange)="onZoneChange()" [(ngModel)]="selectedZone"
          [options]="zoneOptions" optionLabel="label" optionValue="value" [allowEmpty]="false" />
      </div>
    </span>

    <div class="select-button-container" *ngIf="selectedSection == 1">
      <p-selectButton (onChange)="onViewSelectionChange($event)" [(ngModel)]="selectedView" [options]="viewOptions"
        optionLabel="label" optionValue="value" [allowEmpty]="false" />
    </div>
  </div>
  <div class="button-container">
    <div class="display-flex">
      <label class="zonelable mr-2">Copy Zone</label>
      <div class="select-zone-button-container mr-2">
        <p-selectButton (onChange)="onViewSelectionZoneChange($event)" [(ngModel)]="selectedChangeZone" [disabled]="!isCopyZone"
          [options]="viewZoneOptions" optionLabel="label" optionValue="value" [allowEmpty]="false" />
      </div>
    </div>
    <span>
      <p-button type="text" styleClass="chv-light-blue-btn" label="Space Out" icon="pi pi-plus-circle"
        [disabled]="isaddAssemblyDisabled() || !isAddSpaceOut" [ngClass]="{'disabled': isaddAssemblyDisabled() || !isAddSpaceOut}" (click)="addSpaceoutAssembly()"></p-button>
    </span>
    <span>
      <p-button type="text" styleClass="chv-light-blue-btn" label="Assembly" icon="pi pi-plus-circle"
        [disabled]="isaddAssemblyDisabled() || !isAddAssembly" [ngClass]="{'disabled': isaddAssemblyDisabled() || !isAddAssembly}" (click)="addAssembly()"></p-button>
    </span>
    <span>
      <p-button type="text" styleClass="chv-light-blue-btn" label="Schematic" icon="pi pi-save"
        (click)="saveSchematic()" [ngClass]="{'disabled': isaddAssemblyDisabled() || !saveButtonAccess}" [disabled]="!isGridDataAvailable()|| !saveButtonAccess"></p-button>
    </span>
  </div>
</div>

<div>
  <ag-grid-angular style="width: 100%; height: 45vh" class="ag-theme-alpine" [columnDefs]="assemblyColumnDefs"
    [rowData]="assemblyGridData" [rowHeight]="rowHeight" [singleClickEdit]="true" [rowDragManaged]="true"
    [defaultColDef]="{ suppressMenu: true, flex: 1 }" [animateRows]="true" (gridReady)="onGridReady1($event)"
    (cellValueChanged)="onAssemblyCellValueChanged($event)" (rowDragEnd)="onRowDragEndAssembly($event)"
    (rowClicked)="onRowClicked($event)" [gridOptions]="gridOptions">
  </ag-grid-angular>
</div>

<div>Components of Item: {{ selectedAssemblyItemNumber }}</div>
<div>
  <ag-grid-angular class="ag-theme-alpine componentGridSize" [columnDefs]="componentColumnDefs"
    [rowData]="componentGridData" [rowHeight]="rowHeight"
    [defaultColDef]="{ suppressHeaderMenuButton: true, flex: 1, minWidth: 100 }" [singleClickEdit]="true"
    [rowDragManaged]="true" [animateRows]="true" (gridReady)="onGridReady2($event)"
    (rowClicked)="onComponentRowClicked($event)"
    (cellValueChanged)="onComponentCellValueChanged($event)" (rowDragEnd)="onRowDragEndComponent($event)">
  </ag-grid-angular >
</div>

<!-- <mdlSelectDialog *ngIf="showMdlDialog" (addSelected)="addSelectedComponents($event)"
                 [assemblyData]="selectedAssemblyData" (onClose)="showMdlDialog = false"></mdlSelectDialog> -->
<app-mdl-add-component *ngIf="showMdlDialog" (addSelected)="addSpaceOutComponent($event)"
  [assemblyData]="selectedAssemblyData" [moduleName]="'schematicAddComponent'"
  (onClose)="showMdlDialog = false"></app-mdl-add-component>
<app-delete-dialog [(displayDeleteComponentSchemanticDialog)]="
    displayDeleteComponentSchemanticDialog" [message]="'Are you sure you want to delete the selected component?'" [componentData]="selectedComponentData"
  (componentDeleted)="onComponentDeleted()" (onClose)="deleteDialogClose()"></app-delete-dialog>
<!-- <app-delete-dialog-common [(displayDeleteComponentDialog)]="displayDeleteComponentDialog" [message]="'Are you sure you want to delete the selected component?'" [componentData]="selectedComponentData"
    (onDelete)="deleteDialogClose()"></app-delete-dialog-common> -->
<app-delete-confirmation-dialog [(displayDeleteComponentDialog)]="displayDeleteComponentDialog" [buttonName]="'Delete'"
  [dialogContent]="'Are you sure want to Delete ?'" [dialogTitle]="'Confirm Delete'"
  (onClose)="displayDeleteComponentDialog = false" (onDelete)="deleteConfirm()"></app-delete-confirmation-dialog>

<app-confirmation-dialog [(visible)]="displayConfirmationZoneDisableDialog" [countinueButtonName]="'Disable'"
  class="zone-dialog" [cancelButtonVisibile]="'true'" [dialogContent]="
    'You are attempting to disable the Copy Zone Functionality. If you wish to continue, click Disable, otherwise click Cancel.'
  " [dialogTitle]="'Disable Copy Zone Confirmation'" (onCancel)="onZoneClose()" (onContinue)="copyZoneSave()"
  [continueButtonClass]="'copyZoneDisableBtn'" [iconColor]="'color-theme-red'">
</app-confirmation-dialog>

<app-confirmation-dialog [(visible)]="displayConfirmationZoneEnableDialog" [countinueButtonName]="'Enable'"
  class="zone-dialog" [cancelButtonVisibile]="'true'" [dialogContent]="
    ' You are attempting to enable the Copy Zone Functionality. If you have made any changes to the Zone 2 â†’ N in the Intermediate and Lower Sections those changes will be overwritten by what is in Zone 2 of those sections. If you wish to continue, click Enable, otherwise click Cancel.'
  " [dialogTitle]="'Enable Copy Zone Confirmation'" (onCancel)="onZoneClose()" (onContinue)="copyZoneSave()"
  [continueButtonClass]="'copyZoneDisableBtn'">
</app-confirmation-dialog>

<app-confirmation-dialog [(visible)]="displayColoneConfirmation" [countinueButtonName]="'Save'"
  class="zone-dialog" [cancelButtonVisibile]="'true'" [dialogContent]="cloneContent" (onCancel)="cancelCloneBtn()" (onContinue)="confirmationCloneModal()"
  [continueButtonClass]="'copyZoneDisableBtn'" [iconColor]="'color-theme-red'">
</app-confirmation-dialog>

<app-clone-assembly 
[(visible)]="displayCloneModal" 
[assembly]="cloneAssemblyData" 
[wellFeatures]="wellFeatures"
[sections]="sections"
  (onClone)="onCloneClick($event)"
  (onCancel)="hideCloneAssembly()"
>
</app-clone-assembly>
<!-- <app-custom-dialog [(visible)]="showMissingMM" [dialogTitle]="'Confirmation'"
        [savebuttonName]="'Save'" (onCreateEvent)="onProceedChange()" [dialogWidth]="'400px'"
        [maximizable]="false" (onClose)="closeMissingModel()">
        <div class="unsaved-changes-body">
            <i class="pi pi-info-circle iconSize"></i>
            <div class="pl-2 pt-3 parentDiv">
                <span class="displaymessage">
                    <p>
                        Selected group "{{selectedGroupName}}" has missing Material Number or Description.\nDo you still want to proceed?
                    </p>
                </span>
            </div>
        </div>
    </app-custom-dialog> -->